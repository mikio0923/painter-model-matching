# 機能一覧・画面総数・未着手・修正箇所・リリース課題

※ コードベースとルート・ビューから整理（2025年2月時点）

---

## 1. 機能一覧（実装済み）

### 1.1 公開（ゲストOK）

| 機能 | ルート | 画面（ビュー） | 備考 |
|------|--------|----------------|------|
| トップ | `/` | home | 検索導線・価値提示 |
| モデル一覧 | `/models` | models/index | 検索・フィルタ |
| モデル詳細 | `/models/{id}` | models/show + 部分（photo, profile, qa, comments） | タブ表示 |
| 依頼一覧 | `/jobs` | jobs/index | 検索・フィルタ |
| 依頼詳細 | `/jobs/{id}` | jobs/show | 応募・お気に入り |
| お知らせ一覧 | `/information` | information/index |  |
| お知らせ詳細 | `/information/{id}` | information/show |  |
| 利用ガイドライン | `/guideline` | guideline | 静的 |
| よくある質問 | `/faq` | faq | 静的 |
| 利用規約 | `/terms` | **terms** | **ビュー未作成** |
| プライバシーポリシー | `/privacy` | **privacy** | **ビュー未作成** |
| サイトについて | `/about` | about | 静的 |
| モデル向けガイド | `/guide/model` | guide.model | 静的 |
| 画家向けガイド | `/guide/painter` | guide.painter | 静的 |
| お問い合わせ | `/contact` GET/POST | contact/create | 送信・throttle |

### 1.2 認証

| 機能 | ルート | 画面 | 備考 |
|------|--------|------|------|
| ログイン・新規登録入口 | `/login-register` | auth/login-register |  |
| 新規登録（メール送信） | `/register` 等 | auth/register, register-email, register-email-sent, register (verify) | メール認証付き |
| ログイン | `/login` | auth/login-register |  |
| パスワード忘れ | `/forgot-password` | auth/forgot-password |  |
| パスワードリセット | `/reset-password/{token}` | auth/reset-password |  |
| メール認証 | verify-email 等 | auth/verify-email |  |
| パスワード確認 | confirm-password | auth/confirm-password |  |

### 1.3 ログイン必須（共通）

| 機能 | ルート | 画面 | 備考 |
|------|--------|------|------|
| マイページ | `/mypage` | mypage/model または mypage/painter | role で分岐 |
| プロフィール編集（共通） | `/profile` | profile/edit | 名前・メール・パスワード・退会 |
| メッセージ一覧 | `/messages` | messages/index |  |
| メッセージ詳細 | `/messages/job/{job}` | messages/show |  |
| レビュー投稿 | `/jobs/{job}/reviews/create` | reviews/create |  |
| 通知一覧 | `/notifications` | notifications/index | 既読・一括既読 |
| お気に入り一覧 | `/favorites` | favorites/index | モデル・依頼のお気に入り |

### 1.4 モデル専用

| 機能 | ルート | 画面 | 備考 |
|------|--------|------|------|
| プロフィール作成 | `/model/profile/create` | model/profile/create | 初回用 |
| プロフィール編集 | `/model/profile/edit` | model/profile/edit |  |
| 応募一覧 | `/model/applications` | model/applications/index |  |
| 依頼への応募 | POST `/model/jobs/{job}/apply` | （依頼詳細から） |  |
| あなたへの質問一覧 | `/model/questions` | model/questions/index |  |
| 質問編集 | `/model/questions/{id}/edit` | model/questions/edit |  |
| 本人確認 | `/model/identity-verification` | model/account/identity-verification | 自己申告のみ |
| 有料オプション | `/model/paid-options` | model/account/coming-soon | **準備中** |
| 課金・決済履歴 | `/model/billing-history` | model/account/coming-soon | **準備中** |
| 支払い方法 | `/model/payment-method` | model/account/coming-soon | **準備中** |

### 1.5 画家専用

| 機能 | ルート | 画面 | 備考 |
|------|--------|------|------|
| 画家プロフィール編集 | `/painter/profile/edit` | painter/profile/edit |  |
| 依頼一覧（自分の） | `/painter/jobs` | painter/jobs/index |  |
| 依頼作成 | `/painter/jobs/create` | painter/jobs/create |  |
| 依頼編集 | `/painter/jobs/{id}/edit` | painter/jobs/edit |  |
| 応募者一覧 | `/painter/jobs/{job}/applications` | painter/jobs/applications/index | 承認・却下 |

### 1.6 管理画面（Admin）

| 機能 | ルート | 画面 | 備考 |
|------|--------|------|------|
| ダッシュボード | `/admin/dashboard` | admin/dashboard |  |
| ユーザー一覧・詳細・削除 | `/admin/users` | admin/users/index, show |  |
| 依頼一覧・詳細・削除 | `/admin/jobs` | admin/jobs/index, show |  |
| お問い合わせ一覧・詳細・既読・削除 | `/admin/contacts` | admin/contacts/index, show |  |
| お知らせ CRUD | `/admin/information` | admin/information/index, create, edit |  |

---

## 2. 画面総数

- **Blade ビューファイル数**: 84 ファイル（components / partials / エラー含む）
- **ユーザーが遷移する「画面」としての概数**: **約 55 画面**
  - 公開: 約15（トップ・モデル・依頼・お知らせ・静的・お問い合わせ）
  - 認証: 約10
  - 共通（mypage, profile, messages, reviews, notifications, favorites）: 約8
  - モデル専用: 約10（coming-soon は1画面で3機能）
  - 画家専用: 約6
  - 管理: 約10
  - エラー: 403, 404, 500

※ 部分テンプレート（models/show/*, profile/partials 等）は「1画面」に含めてカウント。

---

## 3. 未着手・準備中の機能と画面

### 3.1 未着手（画面・機能が未実装）

| 項目 | 内容 | 影響 |
|------|------|------|
| 利用規約 | `Route::view('/terms', 'terms')` で参照する `terms.blade.php` が存在しない | `/terms` アクセスで View エラー |
| プライバシーポリシー | 同様に `privacy.blade.php` が存在しない | `/privacy` アクセスで View エラー |

### 3.2 準備中（画面はあるが中身は「準備中」）

| 機能 | 画面 | 備考 |
|------|------|------|
| 有料オプション | model/account/coming-soon | 目立つ表示・検索上位など |
| 課金・決済履歴 | model/account/coming-soon | 利用履歴・決済明細 |
| カード情報登録 | model/account/coming-soon | 支払い方法登録 |

※ 本人確認は「自己申告」で実装済み。IA ドキュメントの「本人確認（書類）」は将来対応。

---

## 4. 今後発生しうる必要修正箇所

- **必須修正**
  - **利用規約・プライバシーポリシー**: `resources/views/terms.blade.php` と `privacy.blade.php` を追加し、内容を記載する。
- **バリデーション・セキュリティ**
  - 登録・プロフィール編集・依頼作成・メッセージなど、入力フォームのバリデーションとエラーメッセージの見直し（`lang/ja/validation.php` 等）。
  - 権限チェックの漏れがないか（他ユーザーの編集・削除・閲覧の制限）。
- **UX・表示**
  - モデル未登録の画家が「依頼作成」したときの導線（画家プロフィール必須かどうか）。
  - 空状態（応募0件・メッセージ0件・お気に入り0件）の文言・導線。
  - スマホ表示の確認と調整。
- **パフォーマンス**
  - モデル一覧・依頼一覧の N+1 解消、インデックス、必要に応じたページネーション。
- **運用**
  - 管理者の作成方法（シード or 初回設定手順）。
  - 本番環境の APP_DEBUG=false、ログ・監視。

---

## 5. リリースまでの問題点（リリース時に解消したいもの）

1. **欠落ビュー**
   - `/terms`・`/privacy` のビューが無いため、フッター等からリンクされていると 500 になる。リリース前に必ず追加する。

2. **コンテンツ**
   - 利用規約・プライバシーポリシーの文案（法務確認推奨）。
   - お知らせ・FAQ・ガイドの文言が本番想定で揃っているか。

3. **認証・登録**
   - メール認証が有効な場合、送信元・本文・スパム判定の確認。
   - レート制限（throttle）が本番負荷で適切か。

4. **役割・導線**
   - モデル: プロフィール未作成で「依頼に応募」した場合の挙動とメッセージ。
   - 画家: プロフィール未作成で「依頼作成」できるか、必須なら導線を明示。

5. **テスト**
   - Feature テストは認証・プロフィール中心。依頼・応募・メッセージ・お気に入り・管理画面の主要シナリオのテストがあると安心。

6. **本番環境**
   - 環境変数（DB、MAIL、APP_KEY、APP_URL 等）、ストレージ（画像）、ログ、バックアップ方針。

---

## 6. 「リリース5」について

リポジトリ内に「リリース5」やバージョン番号の定義は見当たりませんでした。  
**「リリーズ5」を「リリース時の問題点」の意味**で解釈し、上記 **5. リリースまでの問題点** にまとめています。  
もし「第5回リリース」や「Phase 5」など別の意味であれば、その範囲を教えていただければそれに合わせて整理します。

---

## 7. 参考：IA ドキュメントとの対応

- `docs/ia.md` では MVP に含めないとされていた「決済・レビュー・本人確認」のうち、
  - **決済**: 未実装（有料オプション・課金履歴・支払い方法は coming-soon）。
  - **レビュー**: 実装済み（レビュー投稿・表示）。
  - **本人確認**: 自己申告のみ実装。書類による本人確認は「将来予定」として identity-verification 画面に記載済み。

以上。
